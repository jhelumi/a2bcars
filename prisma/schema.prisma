// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id            String      @id @default(uuid())
  name          String
  email         String
  emailVerified Boolean     @default(false)
  image         String?
  role          String?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  sessions      Session[]
  accounts      Account[]
  routePages    RoutePage[]
  enquiries     Enquiry[]

  @@unique([email])
  @@map("user")
}

model Session {
  id        String   @id @default(uuid())
  expiresAt DateTime
  token     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([token])
  @@index([userId])
  @@map("session")
}

model Account {
  id                    String    @id @default(uuid())
  accountId             String
  providerId            String
  userId                String
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  @@index([userId])
  @@map("account")
}

model Verification {
  id         String   @id @default(uuid())
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([identifier])
  @@map("verification")
}

model RoutePage {
  id          String   @id @default(uuid())
  address     String   @unique
  title       String
  seoKeywords String
  content     String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Enquiry {
  id              String   @id @default(uuid())
  customerType    CutomerType   
  companyName     String?
  journeyType     JorneyType
  name            String
  email           String?
  phone           String
  startLocation   String
  endLocation     String
  travelDate      DateTime
  travelTime      String

  returnDate      DateTime?
  returnTime      String?
  adults          Int
  children        Int
  luggageType     LuggageType?
    
  airportName     String?
  terminal        String?
  flightNumber    String?
  meetAndGreet    Boolean?
  
  specialRequirements String?
  status          EnquiryStatus
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  userId          String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
}

enum JorneyType {
  Single
  Return
  Airport
}
enum CutomerType {
  Personal
  Corporate  
}

enum LuggageType {
  Light
  Standard
  Heavy
}

enum EnquiryStatus {
  Open
  InProgress
  Closed
}